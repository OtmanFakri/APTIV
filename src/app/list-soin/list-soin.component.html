<nz-tabset
  [nzTabBarExtraContent]="extraTemplate"
  (nzSelectedIndexChange)="onTabChange($event)"
>
  <nz-tab nzTitle="Soin">
    <div class="container mx-auto p-4">

      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Employee ID
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Created At
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Diagnostic
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Soins
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Soins Poste De Garde
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Medicament Associations
            </th>

          </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
          <tr
            *ngFor="let item of items.items"
            (click)="updateItem(item)"
          >
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ item.employee_id }}</td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ item.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold">{{ item.diagnostic.join(', ') }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold">{{ item.soins.join(', ') }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ item.soins_poste_de_garde }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
              <div *ngFor="let assoc of item.medicament_associations">
                {{ assoc.medicament.name }} (Quantit√©: {{ assoc.quantite }})
              </div>
            </td>

          </tr>
          </tbody>
        </table>
        <nz-drawer
          [nzClosable]="false"
          [nzVisible]="Updatevisible"
          nzPlacement="right"
          nzTitle="Basic Drawer"
          [nzFooter]="footerTpl"
          (nzOnClose)="UpdatehandleCancel()"
        >
          <ng-container *nzDrawerContent>
            <app-update-soin
              [soin]="selectedItem"/>
          </ng-container>
          <ng-template #footerTpl>
            <div style="float: right">
              <button nz-button style="margin-right: 8px;" (click)="deleteItem()" nzDanger>Delete</button>
              <button nz-button nzType="primary" (click)="UpdatehandleOk()">Submit</button>
            </div>
          </ng-template>
        </nz-drawer>
      </div>
    </div>
  </nz-tab>
  <nz-tab nzTitle="Tab 2">
    <app-kpi
      [selectedDate]="KpiDate"
      [indexTabs]="indexTabs"
      [mode]="mode"
    />
  </nz-tab>
</nz-tabset>
<ng-template #extraTemplate>
  <div *ngIf="indexTabs === 0 ;else elseBlock" class="mt-3 sm:ml-4 sm:mt-0">
    <div class="mt-3 sm:ml-4 sm:mt-0">
      <label for="mobile-search-candidate" class="sr-only">Search</label>
      <label for="desktop-search-candidate" class="sr-only">Search</label>
      <div class="flex rounded-md shadow-sm items-center ">
        <div class="relative flex-grow focus-within:z-10">
          <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
            <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd"
                    d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
                    clip-rule="evenodd"/>
            </svg>
          </div>
          <input type="text" name="mobile-search-candidate" id="mobile-search-candidate"
                 class="block w-full rounded-none rounded-l-md border-0 py-1.5 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:hidden"
                 placeholder="Search">
          <input type="text" name="desktop-search-candidate" id="desktop-search-candidate"
                 class="hidden w-full rounded-none rounded-l-md border-0 py-1.5 pl-10 text-sm leading-6 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:block"
                 placeholder="Search candidates">
        </div>
        <button type="button"
                (click)="CreateshowModal()"
                class="relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" x="0"
               y="0"
               viewBox="0 0 25 25" style="enable-background:new 0 0 512 512" xml:space="preserve" class="h-5 w-5"><g>
          <path
            d="M20.5 4h-16a.5.5 0 0 0-.5.5v16a.5.5 0 0 0 .5.5h16a.5.5 0 0 0 .5-.5v-16a.5.5 0 0 0-.5-.5zM20 20H5V5h15z"
            fill="#000000" opacity="1" data-original="#000000" class=""></path><path
            d="M8.5 13H12v3.5a.5.5 0 0 0 1 0V13h3.5a.5.5 0 0 0 0-1H13V8.5a.5.5 0 0 0-1 0V12H8.5a.5.5 0 0 0 0 1z"
            fill="#000000" opacity="1" data-original="#000000" class=""></path></g></svg>
          New
        </button>
        <div
          (click)="open()"
          class="pl-2"
        >Filter
        </div>

      </div>
      <nz-modal [(nzVisible)]="CreateisVisible"
                nzTitle="The first Modal"
                [nzFooter]="modalFooter"
                (nzOnCancel)="CreatehandleCancel()"
                (nzOnOk)="CreatehandleOk()">
        <ng-container *nzModalContent>
          <app-create-soin/>
        </ng-container>
        <ng-template #modalFooter>
          <button nz-button nzType="default" (click)="CreatehandleCancel()">Custom Callback</button>
          <button nz-button nzType="primary" (click)="CreatehandleOk()" [nzLoading]="isCreating">Custom Submit
          </button>
        </ng-template>
      </nz-modal>
      <nz-drawer
        [nzClosable]="false"
        [nzVisible]="visible"
        nzPlacement="right"
        nzTitle="Basic Drawer"
        (nzOnClose)="close()"
      >
        <ng-container *nzDrawerContent>
          <nz-space>
            <nz-select *nzSpaceItem [(ngModel)]="mode" (ngModelChange)="onModeChange($event)">
              <nz-option nzValue="date" nzLabel="Date"></nz-option>
              <nz-option nzValue="month" nzLabel="Month"></nz-option>
              <nz-option nzValue="year" nzLabel="Year"></nz-option>
            </nz-select>
            <nz-date-picker
              *nzSpaceItem [nzMode]="mode" [(ngModel)]="selectedDate"
              (ngModelChange)="onDateChange($event)"></nz-date-picker>
          </nz-space>
        </ng-container>
      </nz-drawer>

    </div>
  </div>
  <ng-template #elseBlock>
    <nz-space>
      <nz-select
        (ngModelChange)="onKpiModeChange($event)"
        *nzSpaceItem [(ngModel)]="mode">
        <nz-option nzValue="date" nzLabel="Date"></nz-option>
        <nz-option nzValue="month" nzLabel="Month"></nz-option>
        <nz-option nzValue="year" nzLabel="Year"></nz-option>
      </nz-select>
      <nz-date-picker
        [nzAllowClear]="false"
        [(ngModel)]="KpiDate"
        (ngModelChange)="onKpiDateChange($event)"
        *nzSpaceItem [nzMode]="mode"></nz-date-picker>
    </nz-space>
  </ng-template>

</ng-template>
