<div class="card col-span-12 pb-4">
  <div class="mt-3 flex items-center justify-between px-4 sm:px-5">
    <h2
      class="text-sm+ font-medium tracking-wide text-slate-700 "
    >
      Nombre des contres visites
    </h2>
    <div class="flex items-center space-x-4 ">
      <nz-date-picker nzMode="year" ></nz-date-picker>
      <nz-select
        class="w-32"
        nzPlaceHolder="Select users"
        nzAllowClear
        nzSize="default"
        nzShowSearch
        nzServerSearch
        [(ngModel)]="selectedUser"
      >
        <ng-container *ngFor="let o of optionList">
          <nz-option *ngIf="!isLoading" [nzValue]="o" [nzLabel]="o"></nz-option>
        </ng-container>
        <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
          <span nz-icon nzType="loading" class="loading-icon"></span>
          Loading Data...
        </nz-option>
      </nz-select>
    </div>
  </div>
  <div class="mt-3 grid grid-cols-12">
    <div class="col-span-12 px-4 sm:col-span-6 sm:px-5 lg:col-span-4">
      <nz-table #sortTable [nzData]="dataList"
                [nzScroll]="{ y: '240px' }"
                [nzFooter]="footerTemplate"
                nzShowPagination="false"
                nzTableLayout="fixed">
        <thead>
        <tr>
          <th nzWidth="20%" [nzSortFn]="true">Month</th>
          <th nzWidth="20%" [nzSortFn]="true">Sans</th>
          <th nzWidth="20%" [nzSortFn]="true">Contres visites</th>
          <th nzWidth="20%" [nzSortFn]="true">Total CM</th>
          <th nzWidth="20%" [nzSortFn]="true">%</th>
        </tr>
        </thead>
        <tbody>
        <tr
          *ngFor="let data of sortTable.data">
          <td>{{ data.month }}</td>
          <td>{{ data.total_participations }}</td>
          <td>{{ data.rest_participations }}</td>
          <td>{{ data['Total CM'] | number:'1.2-2' }}</td>
          <td>{{ data['%'] | number:'1.2-2' }}</td>
        </tr>
        </tbody>
      </nz-table>

      <ng-template #footerTemplate>
        <tr class="flex justify-between">
          <th>Total</th>
          <td>{{ totals.totalSans }}</td>
          <td>{{ totals.totalContresVisites }}</td>
          <td>{{ totals.totalCM | number:'1.2-2' }}</td>
          <td>{{ totals.totalPercent | number:'1.2-2' }}%</td>
        </tr>
      </ng-template>

    </div>
    <div
      class="ax-transparent-gridline col-span-12 px-2 sm:col-span-6 lg:col-span-8"
    >
      <div
      >
        <canvas width="800" height="300" #ExaminiationCanvas>{{ chart }}</canvas>

      </div>
    </div>
  </div>
</div>
